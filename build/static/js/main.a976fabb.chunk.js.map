{"version":3,"sources":["components/Home/index.tsx","hooks/useShallowEqualSelector.ts","hooks/useActions.ts","modules/Auth/actions.ts","components/MainMenu/index.tsx","components/Chat/index.tsx","services/auth.ts","components/Login/index.tsx","components/Register/index.tsx","components/Recover/index.tsx","components/ChangePassword/index.tsx","components/Activation/index.tsx","components/PrivateRoute/index.tsx","components/App/index.tsx","reportWebVitals.ts","modules/Auth/sagas.ts","modules/Auth/reducer.ts","modules/index.ts","store.ts","index.tsx"],"names":["Home","className","src","style","width","maxWidth","alt","useShallowEqualSelector","selector","useSelector","shallowEqual","useActions","actions","deps","dispatch","useDispatch","useMemo","Array","isArray","map","a","bindActionCreators","AUTH_USER_FETCH_REQUEST","setUser","createAction","setToken","logoutUserRequest","fetchUserRequest","fetchUserSuccess","fetchUserFailure","unauthorizedItems","key","name","label","path","icon","PieChartOutlined","authorizedItems","MainMenu","useState","selectedKey","setSelectedKey","location","useLocation","history","useHistory","user","state","auth","dispatchLogoutUserRequest","menuItems","useCallback","findSelectedKey","selectedItem","find","item","pathname","useEffect","float","mode","selectedKeys","onClick","clicked","_item","push","Item","Chat","AUTH_TOKEN_STORAGE_KEY","makeError","error","response","statusText","type","message","data","AuthService","register","payload","send","method","endpoint","activate","code","login","fetchByToken","recover","checkSecretcode","changePassword","getToken","localStorage","getItem","setItem","removeToken","removeItem","axios","Login","emptyMessage","Form","useForm","form","alert","setAlert","loading","setLoading","dispatchSetUser","dispatchSetToken","onFinish","values","email","password","authService","token","title","initialValues","remember","rules","required","min","prefix","MailOutlined","placeholder","size","Password","LockOutlined","noStyle","to","indicator","LoadingOutlined","fontSize","spin","delay","htmlType","block","Register","resetFields","validateTrigger","pattern","UserOutlined","dependencies","getFieldValue","validator","_","value","Promise","reject","Error","resolve","disabled","Recover","ChangePassword","useParams","secretError","setSecretError","changeSuccess","setChangeSuccess","secretType","match","Activation","activateUser","PrivateRoute","props","Component","component","children","rest","render","routeProps","from","defaultProps","undefined","Header","Layout","Content","Footer","Sider","App","collapsed","setCollapsed","toggle","event","preventDefault","minHeight","theme","collapsible","trigger","DesktopOutlined","MenuUnfoldOutlined","MenuFoldOutlined","exact","textAlign","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","setTokenFlow","setTokenWatcher","logoutUserRequestFlow","userLogoutWatcher","fetchUserByTokenFlow","fetchUserByTokenWatcher","generator","call","takeLatest","put","takeLeading","fork","handleActions","_state","action","combineReducers","rootSaga","authSagas","store","sagaMiddleware","createSagaMiddleware","createStore","rootReducer","compose","applyMiddleware","window","__REDUX_DEVTOOLS_EXTENSION__","run","document","getElementById"],"mappings":"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","file":"static/js/main.a976fabb.chunk.js","sourcesContent":["import { FC } from 'react'\n\nconst Home: FC = () => (\n  <div className=\"flex-center flex-column\">\n    <h1>Коротко о Svelte</h1>\n    <img\n      src=\"/images/svelte.png\"\n      style={{ width: 700, maxWidth: '100%' }}\n      alt=\"Коротко о Svelte\"\n    />\n  </div>\n)\n\nexport default Home\n","import { useSelector, shallowEqual } from 'react-redux'\n\nconst useShallowEqualSelector = (selector) =>\n  useSelector(selector, shallowEqual)\n\nexport default useShallowEqualSelector\n","import { bindActionCreators } from 'redux'\nimport { useDispatch } from 'react-redux'\nimport { useMemo } from 'react'\n\nconst useActions = (actions, deps) => {\n  const dispatch = useDispatch()\n\n  return useMemo(\n    () => {\n      if (Array.isArray(actions)) {\n        return actions.map((a) => bindActionCreators(a, dispatch))\n      }\n      return bindActionCreators(actions, dispatch)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    deps ? [dispatch, ...deps] : [dispatch]\n  )\n}\n\nexport default useActions\n","import { createAction } from 'redux-actions'\r\n\r\nexport const AUTH_USER_FETCH_REQUEST = 'AUTH/USER_FETCH_REQUEST'\r\n\r\n/** Записать объект пользователя в стор */\r\nexport const setUser: any = createAction('AUTH/SET_USER')\r\n\r\n/** Записать токен пользователя в стор */\r\nexport const setToken: any = createAction('AUTH/USER_SET_TOKEN')\r\n\r\n/** Выход пользователя из системы (logout) */\r\nexport const logoutUserRequest: any = createAction('AUTH/USER_LOGOUT_REQUEST')\r\n\r\n/** Получить объект пользователя по токену */\r\nexport const fetchUserRequest: any = createAction(AUTH_USER_FETCH_REQUEST)\r\n/** Записать объект пользователя в стор */\r\nexport const fetchUserSuccess: any = createAction('AUTH/USER_FETCH_SUCCESS')\r\n/** Ошибка получения объекта пользователя */\r\nexport const fetchUserFailure: any = createAction('AUTH/USER_FETCH_FAILURE')\r\n","import { FC, useState, useEffect, useCallback } from 'react'\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { PieChartOutlined } from '@ant-design/icons'\nimport { Menu } from 'antd'\nimport useShallowEqualSelector from '../../hooks/useShallowEqualSelector'\nimport { RootState } from '../../modules'\nimport useActions from '../../hooks/useActions'\nimport { logoutUserRequest } from '../../modules/Auth/actions'\n\nconst unauthorizedItems = [\n  {\n    key: '1',\n    name: 'login',\n    label: 'Войти',\n    path: '/auth/login',\n    icon: <PieChartOutlined />\n  },\n  {\n    key: '2',\n    name: 'register',\n    label: 'Регистрация',\n    path: '/auth/register',\n    icon: <PieChartOutlined />\n  }\n]\n\nconst authorizedItems = [\n  {\n    key: '1',\n    name: 'home',\n    label: 'Главная',\n    path: '/',\n    icon: <PieChartOutlined />\n  },\n  {\n    key: '2',\n    name: 'logout',\n    label: 'Выйти',\n    path: '/auth/logout',\n    icon: <PieChartOutlined />\n  }\n]\n\nconst MainMenu: FC = () => {\n  const [selectedKey, setSelectedKey] = useState('')\n  const location = useLocation()\n  const history = useHistory()\n  const user = useShallowEqualSelector((state: RootState) => state.auth.user)\n\n  const [dispatchLogoutUserRequest] = useActions([logoutUserRequest], null)\n\n  const menuItems = useCallback(\n    () => (user ? authorizedItems : unauthorizedItems),\n    [user]\n  )\n\n  const onClickMenu = (item) => {\n    const clicked = menuItems().find((_item) => _item.key === item.key)\n    if (clicked.name === 'logout') {\n      dispatchLogoutUserRequest()\n      history.push('/auth/login')\n      return\n    }\n\n    history.push(clicked!.path)\n  }\n\n  const findSelectedKey = useCallback(() => {\n    const selectedItem = menuItems().find(\n      (item) => location.pathname === item.path\n    )\n    return selectedItem?.key || ''\n  }, [location.pathname, menuItems])\n\n  useEffect(() => {\n    setSelectedKey(findSelectedKey())\n  }, [location, findSelectedKey])\n\n  return (\n    <Menu\n      style={{ float: 'right' }}\n      mode=\"horizontal\"\n      selectedKeys={[selectedKey]}\n      onClick={onClickMenu}\n    >\n      {menuItems().map((item) => (\n        <Menu.Item key={item.key} icon={item.icon}>\n          {item.label}\n        </Menu.Item>\n      ))}\n    </Menu>\n  )\n}\n\nexport default MainMenu\n","const Chat = () => <h1>Chat window</h1>\n\nexport default Chat\n","import axios from 'axios'\n\nexport interface ServerResponse {\n  type: any\n  message?: string\n  data?: any\n  errors?: string[]\n  token?: string\n}\n\nexport interface UserLoginRequestDTO {\n  email: string\n  password: string\n}\n\nexport interface UserCreateRequestDTO {\n  name: string\n  email: string\n  password: string\n}\n\nexport interface UserDTO {\n  id: number\n  name: string\n  email: string\n  role: string\n}\n\nexport interface UserRecoverPasswordRequestDTO {\n  email: string\n}\n\nexport interface CheckSecretCodeRequestDTO {\n  code: string\n  secretType: string\n}\n\nexport interface ChangePasswordRequestDTO {\n  code: string\n  password: string\n}\n\nexport interface UserFetchByTokenRequestDTO {\n  token: string\n}\n\n/** Сообщение при недоступном соединении */\nconst SERVER_UNAVAILABLE =\n  'Сервер не отвечает или временно недоступен. Попробуйте повторить запрос позднее.'\n/** */\nconst AUTH_TOKEN_STORAGE_KEY = 'auth'\n\nconst makeError = (error): ServerResponse => {\n  const { response } = error\n  // todo не работает на prod\n  if (response.statusText === 'Internal Server Error') {\n    return {\n      type: 'error',\n      message: SERVER_UNAVAILABLE\n    }\n  }\n\n  return response.data\n}\n\nconst AuthService = {\n  /** Регистрация нового пользователя */\n  register: async (payload: UserCreateRequestDTO): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'post',\n      endpoint: '/api/v1/auth/register',\n      payload\n    }),\n\n  /** Активация пользователя по коду из письма */\n  activate: async (code: string): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'patch',\n      endpoint: `/api/v1/auth/activate/${code}`\n    }),\n\n  /** Вход пользователя в систему и полуение токена */\n  login: async (payload: UserLoginRequestDTO): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'post',\n      endpoint: '/api/v1/auth/login',\n      payload\n    }),\n\n  /** Попытка получить объект пользователя по токену */\n  fetchByToken: async (\n    payload: UserFetchByTokenRequestDTO\n  ): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'post',\n      endpoint: '/api/v1/auth/fetch-by-token',\n      payload\n    }),\n\n  /** Запрос на изменение пароля, отправка письма со ссылкой на email */\n  recover: async (\n    payload: UserRecoverPasswordRequestDTO\n  ): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'post',\n      endpoint: '/api/v1/auth/recover',\n      payload\n    }),\n\n  /** Проверка секретного ключа для доступа к форме восстановления пароля */\n  checkSecretcode: async (\n    payload: CheckSecretCodeRequestDTO\n  ): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'post',\n      endpoint: '/api/v1/auth/check-secret',\n      payload\n    }),\n\n  /** Изменение пароля пользователя */\n  changePassword: async (\n    payload: ChangePasswordRequestDTO\n  ): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'patch',\n      endpoint: '/api/v1/auth/change-password',\n      payload\n    }),\n\n  getToken: (): string | null => localStorage.getItem(AUTH_TOKEN_STORAGE_KEY),\n\n  setToken: (payload: string): void =>\n    localStorage.setItem(AUTH_TOKEN_STORAGE_KEY, payload),\n\n  removeToken: (): void => localStorage.removeItem(AUTH_TOKEN_STORAGE_KEY),\n\n  send: async ({ method, endpoint, payload = {} }): Promise<ServerResponse> => {\n    try {\n      const response = await axios[method](endpoint, payload)\n      return response.data\n    } catch (error) {\n      return makeError(error)\n    }\n  }\n}\n\nexport default AuthService\n","import { FC, useState } from 'react'\nimport { Form, Input, Button, Card, Alert, Spin } from 'antd'\nimport { MailOutlined, LockOutlined, LoadingOutlined } from '@ant-design/icons'\nimport { Link, useHistory } from 'react-router-dom'\nimport useActions from '../../hooks/useActions'\nimport authService from '../../services/auth'\nimport { setUser, setToken } from '../../modules/Auth/actions'\n\ninterface FormValues {\n  email: string\n  password: string\n}\n\nconst Login: FC = () => {\n  const emptyMessage = { type: '', message: '' }\n  const [form] = Form.useForm()\n  const [alert, setAlert] = useState(emptyMessage)\n  const [loading, setLoading] = useState(false)\n  const [dispatchSetUser, dispatchSetToken] = useActions(\n    [setUser, setToken],\n    null\n  )\n  const history = useHistory()\n\n  const onFinish = async (values: FormValues) => {\n    try {\n      setAlert(emptyMessage)\n      setLoading(true)\n\n      const { email, password } = values\n      const { type, message, token, data } = await authService.login({\n        email,\n        password\n      })\n\n      if (message) {\n        setAlert({ type, message })\n        setLoading(false)\n        if (type === 'error') return\n      }\n\n      dispatchSetUser(data)\n      dispatchSetToken(token)\n\n      setLoading(false)\n\n      history.push('/')\n    } catch (error) {\n      setAlert(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Войти\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n        <Form\n          form={form}\n          name=\"login\"\n          className=\"login-form\"\n          initialValues={{ remember: true }}\n          onFinish={onFinish}\n        >\n          <Form.Item\n            name=\"email\"\n            rules={[\n              {\n                required: true,\n                type: 'email',\n                min: 4,\n                message: 'Некорректный email'\n              }\n            ]}\n          >\n            <Input prefix={<MailOutlined />} placeholder=\"Email\" size=\"large\" />\n          </Form.Item>\n\n          <Form.Item\n            name=\"password\"\n            rules={[{ required: true, min: 6, message: 'Минимум 6 символов' }]}\n          >\n            <Input.Password\n              placeholder=\"Пароль\"\n              prefix={<LockOutlined />}\n              size=\"large\"\n            />\n          </Form.Item>\n\n          <Form.Item>\n            <Form.Item name=\"register\" noStyle>\n              <Link to=\"/auth/register\">Регистрация</Link>\n            </Form.Item>\n\n            <Link className=\"link-recover\" to=\"/auth/recover\">\n              Забыли пароль?\n            </Link>\n          </Form.Item>\n\n          {loading && (\n            <Spin\n              className=\"center\"\n              indicator={<LoadingOutlined style={{ fontSize: 40 }} spin />}\n              delay={500}\n            />\n          )}\n\n          <Button size=\"large\" type=\"primary\" htmlType=\"submit\" block>\n            Войти\n          </Button>\n        </Form>\n      </Card>\n    </div>\n  )\n}\n\nexport default Login\n","import { FC, useState } from 'react'\nimport { Form, Input, Button, Card, Alert, Spin } from 'antd'\nimport {\n  UserOutlined,\n  LockOutlined,\n  MailOutlined,\n  LoadingOutlined\n} from '@ant-design/icons'\nimport authService from '../../services/auth'\n\ninterface FormValues {\n  name: string\n  email: string\n  password: string\n}\n\nconst Register: FC = () => {\n  const emptyMessage = { type: '', message: '' }\n  const [form] = Form.useForm()\n  const [alert, setAlert] = useState(emptyMessage)\n  const [loading, setLoading] = useState(false)\n\n  const onFinish = async (values: FormValues) => {\n    try {\n      setAlert(emptyMessage)\n      setLoading(true)\n\n      const { name, email, password } = values\n      const { type, message } = await authService.register({\n        name,\n        email,\n        password\n      })\n\n      if (message) {\n        setAlert({ type, message })\n        setLoading(false)\n        if (type === 'error') return\n      }\n\n      form.resetFields()\n      setLoading(false)\n    } catch (error) {\n      setAlert(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Регистрация\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n        <Form\n          form={form}\n          name=\"register\"\n          initialValues={{ remember: true }}\n          onFinish={onFinish}\n          validateTrigger=\"onBlur\"\n        >\n          <Form.Item\n            name=\"name\"\n            rules={[\n              {\n                required: true,\n                message:\n                  \"Имя должно содержать минимум 4 символа английского или русского алфавита, допустимы цифры и знаки '- _'\",\n                pattern: /^[a-zA-Zа-яА-ЯёЁ0-9-_\\s]{4,}$/\n              }\n            ]}\n          >\n            <Input placeholder=\"Имя\" size=\"large\" prefix={<UserOutlined />} />\n          </Form.Item>\n\n          <Form.Item\n            name=\"email\"\n            rules={[\n              { required: true, type: 'email', message: 'Некорректный email' }\n            ]}\n          >\n            <Input prefix={<MailOutlined />} placeholder=\"Email\" size=\"large\" />\n          </Form.Item>\n\n          <Form.Item\n            name=\"password\"\n            rules={[\n              {\n                required: true,\n                message: 'Введите пароль! Минимум 6 символов.',\n                min: 6\n              }\n            ]}\n          >\n            <Input.Password\n              placeholder=\"Пароль\"\n              prefix={<LockOutlined />}\n              size=\"large\"\n            />\n          </Form.Item>\n\n          <Form.Item\n            name=\"confirm-password\"\n            dependencies={['password']}\n            rules={[\n              {\n                required: true,\n                message: 'Введите подтверждение пароля! Минимум 6 символов.',\n                min: 6\n              },\n              ({ getFieldValue }) => ({\n                validator(_, value) {\n                  if (!value || getFieldValue('password') === value) {\n                    return Promise.resolve()\n                  }\n                  return Promise.reject(new Error('Пароли должны совпадать!'))\n                }\n              })\n            ]}\n          >\n            <Input.Password\n              placeholder=\"Пароль еще раз\"\n              prefix={<LockOutlined />}\n              size=\"large\"\n            />\n          </Form.Item>\n\n          {loading && (\n            <Spin\n              className=\"center\"\n              indicator={<LoadingOutlined style={{ fontSize: 40 }} spin />}\n              delay={500}\n            />\n          )}\n\n          <Button\n            className=\"submit-button\"\n            type=\"primary\"\n            htmlType=\"submit\"\n            size=\"large\"\n            block\n            disabled={loading}\n          >\n            Зарегистрироваться\n          </Button>\n        </Form>\n      </Card>\n    </div>\n  )\n}\n\nexport default Register\n","import { FC, useState } from 'react'\nimport { Form, Input, Button, Card, Alert, Spin } from 'antd'\nimport { MailOutlined, LoadingOutlined } from '@ant-design/icons'\nimport authService from '../../services/auth'\n\ninterface FormValues {\n  email: string\n}\n\nconst Recover: FC = () => {\n  const emptyMessage = { type: '', message: '' }\n  const [form] = Form.useForm()\n  const [alert, setAlert] = useState(emptyMessage)\n  const [loading, setLoading] = useState(false)\n\n  const onFinish = async (values: FormValues) => {\n    try {\n      setAlert(emptyMessage)\n      setLoading(true)\n\n      const { email } = values\n      const { type, message } = await authService.recover({\n        email\n      })\n\n      if (message) {\n        setAlert({ type, message })\n        setLoading(false)\n        if (type === 'error') return\n      }\n\n      form.resetFields()\n      setLoading(false)\n    } catch (error) {\n      setAlert(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Восстановление пароля\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n        {alert.type !== 'success' && (\n          <>\n            <p>\n              Укажите email, указанный при регистрации и мы вышлем на него\n              ссылку для восстановления пароля.\n            </p>\n            <Form\n              form={form}\n              name=\"recover\"\n              className=\"login-form\"\n              initialValues={{ remember: true }}\n              onFinish={onFinish}\n              validateTrigger=\"onBlur\"\n            >\n              <Form.Item\n                name=\"email\"\n                rules={[\n                  {\n                    required: true,\n                    type: 'email',\n                    message: 'Некорректный email!'\n                  }\n                ]}\n              >\n                <Input\n                  prefix={<MailOutlined />}\n                  placeholder=\"Email\"\n                  size=\"large\"\n                />\n              </Form.Item>\n\n              {loading && (\n                <Spin\n                  className=\"center\"\n                  indicator={<LoadingOutlined style={{ fontSize: 40 }} spin />}\n                  delay={500}\n                />\n              )}\n\n              <Button\n                size=\"large\"\n                type=\"primary\"\n                htmlType=\"submit\"\n                block\n                disabled={loading}\n              >\n                Восстановить пароль\n              </Button>\n            </Form>\n          </>\n        )}\n      </Card>\n    </div>\n  )\n}\n\nexport default Recover\n","import { FC, useState, useEffect } from 'react'\nimport { useParams, Link } from 'react-router-dom'\nimport { Form, Input, Button, Card, Alert } from 'antd'\nimport { LockOutlined } from '@ant-design/icons'\nimport authService from '../../services/auth'\n\ninterface ChangePasswordParams {\n  code?: string\n}\n\ninterface FormValues {\n  password: string\n  confirmPassword: string\n}\n\nconst ChangePassword: FC = () => {\n  const { code }: ChangePasswordParams = useParams()\n  const emptyMessage = { type: '', message: '' }\n  const [alert, setAlert] = useState(emptyMessage)\n  const [secretError, setSecretError] = useState(false)\n  const [changeSuccess, setChangeSuccess] = useState(false)\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    const checkSecretcode = async () => {\n      const { type, message } = await authService.checkSecretcode({\n        code,\n        secretType: 'RECOVER_PASSWORD'\n      })\n      if (type === 'error') {\n        setAlert({ type, message })\n        setSecretError(true)\n      }\n    }\n\n    if (\n      code.match(\n        /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i\n      )\n    ) {\n      checkSecretcode()\n    } else {\n      setAlert({ type: 'error', message: 'Неверный секретный код!' })\n      setSecretError(true)\n    }\n  }, [code])\n\n  const onFinish = async (values: FormValues) => {\n    try {\n      setAlert(emptyMessage)\n      setLoading(true)\n\n      const { password } = values\n      const { type, message } = await authService.changePassword({\n        code,\n        password\n      })\n\n      if (message) {\n        setAlert({ type, message })\n        setLoading(false)\n        if (type === 'error') return\n      }\n\n      setChangeSuccess(true)\n      setLoading(false)\n    } catch (error) {\n      setAlert(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Изменение пароля\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n\n        {changeSuccess && (\n          <p>\n            Теперь Вы можете <Link to=\"/auth/login\">Войти</Link> в приложение\n          </p>\n        )}\n\n        {!secretError && !changeSuccess && (\n          <>\n            <p>Придумайте новый пароль</p>\n            <Form\n              name=\"change-password-request\"\n              initialValues={{ remember: true }}\n              onFinish={onFinish}\n            >\n              <Form.Item\n                name=\"password\"\n                rules={[{ required: true, message: 'Введите пароль!' }]}\n              >\n                <Input.Password\n                  placeholder=\"Пароль\"\n                  prefix={<LockOutlined />}\n                  size=\"large\"\n                />\n              </Form.Item>\n\n              <Form.Item\n                name=\"confirmPassword\"\n                dependencies={['password']}\n                rules={[\n                  { required: true, message: 'Введите подтверждение пароля!' },\n                  ({ getFieldValue }) => ({\n                    validator(_, value) {\n                      if (!value || getFieldValue('password') === value) {\n                        return Promise.resolve()\n                      }\n                      return Promise.reject(\n                        new Error('Пароли должны совпадать!')\n                      )\n                    }\n                  })\n                ]}\n              >\n                <Input.Password\n                  placeholder=\"Пароль еще раз\"\n                  prefix={<LockOutlined />}\n                  size=\"large\"\n                />\n              </Form.Item>\n\n              <Button\n                className=\"submit-button\"\n                type=\"primary\"\n                htmlType=\"submit\"\n                size=\"large\"\n                block\n                disabled={loading}\n              >\n                Изменить пароль\n              </Button>\n            </Form>\n          </>\n        )}\n      </Card>\n    </div>\n  )\n}\n\nexport default ChangePassword\n","import { FC, useState, useEffect } from 'react'\nimport { Card, Alert } from 'antd'\nimport { Link, useParams } from 'react-router-dom'\nimport authService from '../../services/auth'\n\ninterface ActivationParams {\n  code?: string\n}\n\nconst Activation: FC = () => {\n  const { code }: ActivationParams = useParams()\n  const emptyMessage = { type: '', message: '' }\n  const [alert, setAlert] = useState(emptyMessage)\n\n  useEffect(() => {\n    const activateUser = async () => {\n      const { type, message } = await authService.activate(code)\n      if (message) {\n        setAlert({ type, message })\n      }\n    }\n    activateUser()\n  }, [code])\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Активация нового пользователя\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n        <Link className=\"login-link\" to=\"/auth/login\">\n          Вход\n        </Link>\n        <Link className=\"link-recover\" to=\"/auth/recover\">\n          Восстановить пароль\n        </Link>\n      </Card>\n    </div>\n  )\n}\n\nexport default Activation\n","import { FC } from 'react'\r\nimport { useSelector } from 'react-redux'\r\nimport { Route, Redirect, RouteProps } from 'react-router-dom'\r\nimport { RootState } from '../../modules'\r\n\r\ninterface PrivateRouteProps extends RouteProps {\r\n  component?: any\r\n  children: any\r\n}\r\n\r\nconst PrivateRoute: FC<PrivateRouteProps> = (props: PrivateRouteProps) => {\r\n  const { component: Component, children, ...rest } = props\r\n  const user = useSelector<RootState>((state) => state.auth.user)\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(routeProps) =>\r\n        user === false ? (\r\n          <Redirect\r\n            to={{\r\n              pathname: '/auth/login',\r\n              state: { from: routeProps.location }\r\n            }}\r\n          />\r\n        ) : Component ? (\r\n          <Component {...routeProps} />\r\n        ) : (\r\n          children\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nPrivateRoute.defaultProps = {\r\n  component: undefined\r\n}\r\n\r\nexport default PrivateRoute\r\n","import { FC, SyntheticEvent, useState } from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\nimport { Layout, Menu } from 'antd'\nimport {\n  DesktopOutlined,\n  MenuUnfoldOutlined,\n  MenuFoldOutlined\n} from '@ant-design/icons'\n\nimport Home from '../Home'\nimport MainMenu from '../MainMenu'\nimport Chat from '../Chat'\nimport Login from '../Login'\nimport Register from '../Register'\nimport Recover from '../Recover'\nimport ChangePassword from '../ChangePassword'\nimport Activation from '../Activation'\nimport PrivateRoute from '../PrivateRoute'\n\nconst { Header, Content, Footer, Sider } = Layout\n\nconst App: FC = () => {\n  const [collapsed, setCollapsed] = useState(false)\n\n  const toggle = (event: SyntheticEvent): void => {\n    event.preventDefault()\n    setCollapsed(!collapsed)\n  }\n\n  return (\n    <>\n      <Layout style={{ minHeight: '100vh' }}>\n        <Sider theme=\"light\" collapsible trigger={null} collapsed={collapsed}>\n          <Menu mode=\"inline\">\n            <Menu.Item key=\"1\" icon={<DesktopOutlined />}>\n              Комната 1\n            </Menu.Item>\n            <Menu.Item key=\"2\" icon={<DesktopOutlined />}>\n              Комната 2\n            </Menu.Item>\n          </Menu>\n        </Sider>\n        <Layout className=\"site-layout\">\n          <Header className=\"header site-layout-background\">\n            {collapsed ? (\n              <MenuUnfoldOutlined className=\"trigger\" onClick={toggle} />\n            ) : (\n              <MenuFoldOutlined className=\"trigger\" onClick={toggle} />\n            )}\n            <MainMenu />\n          </Header>\n          <Content className=\"content\">\n            <Switch>\n              <PrivateRoute path=\"/\" exact>\n                <Home />\n              </PrivateRoute>\n              <Route path=\"/auth/login\">\n                <Login />\n              </Route>\n              <Route path=\"/auth/register\">\n                <Register />\n              </Route>\n              <Route path=\"/auth/activation/:code\">\n                <Activation />\n              </Route>\n              <Route path=\"/auth/recover\">\n                <Recover />\n              </Route>\n              <Route path=\"/auth/change-password/:code\">\n                <ChangePassword />\n              </Route>\n              <Route path=\"/chat\">\n                <Chat />\n              </Route>\n              <Route path=\"*\">\n                <Redirect to=\"/auth/login\" />\n              </Route>\n            </Switch>\n          </Content>\n          <Footer style={{ textAlign: 'center' }}>© [Пишем чатик]</Footer>\n        </Layout>\n      </Layout>\n    </>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import { takeLatest, takeLeading, put, call, fork } from 'redux-saga/effects'\r\nimport {\r\n  fetchUserRequest,\r\n  fetchUserSuccess,\r\n  fetchUserFailure,\r\n  logoutUserRequest,\r\n  setUser,\r\n  setToken\r\n} from './actions'\r\nimport authService from '../../services/auth'\r\n\r\n/** Сохранение token в localStorage */\r\nexport function* setTokenFlow({ payload }) {\r\n  yield call([authService, authService.setToken], payload)\r\n}\r\nfunction* setTokenWatcher() {\r\n  yield takeLatest(setToken, setTokenFlow)\r\n}\r\n\r\n/** Выход пользователя из системы (logout) */\r\nexport function* logoutUserRequestFlow() {\r\n  yield call([authService, authService.removeToken])\r\n  yield put(setUser(null))\r\n}\r\nfunction* userLogoutWatcher() {\r\n  yield takeLatest(logoutUserRequest, logoutUserRequestFlow)\r\n}\r\n\r\n/** Получение объекта пользователя по токену */\r\nexport function* fetchUserByTokenFlow() {\r\n  try {\r\n    const token = yield call([authService, authService.getToken])\r\n    if (!token) {\r\n      yield put(fetchUserFailure())\r\n    }\r\n    const user = yield call([authService, authService.fetchByToken], { token })\r\n    if (user.data) {\r\n      yield put(fetchUserSuccess(user.data))\r\n    }\r\n  } catch (error) {\r\n    yield put(fetchUserFailure(error))\r\n  }\r\n}\r\nfunction* fetchUserByTokenWatcher() {\r\n  yield takeLeading(fetchUserRequest, fetchUserByTokenFlow)\r\n}\r\n\r\nexport default function* generator() {\r\n  yield fork(setTokenWatcher)\r\n  yield fork(fetchUserByTokenWatcher)\r\n  yield fork(userLogoutWatcher)\r\n}\r\n","import { combineReducers } from 'redux'\r\nimport { handleActions } from 'redux-actions'\r\nimport { UserDTO } from '../../services/auth'\r\nimport {\r\n  setUser,\r\n  fetchUserRequest,\r\n  fetchUserSuccess,\r\n  fetchUserFailure\r\n} from './actions'\r\n\r\nexport interface AuthState {\r\n  user: UserDTO\r\n}\r\n\r\nconst user = handleActions(\r\n  {\r\n    [fetchUserRequest]: () => null,\r\n    [fetchUserSuccess]: (_state, action) => action.payload,\r\n    [fetchUserFailure]: () => false,\r\n    [setUser]: (_state, action) => action.payload\r\n  },\r\n  null\r\n)\r\n\r\nexport default combineReducers<AuthState>({\r\n  user\r\n})\r\n","import { combineReducers } from 'redux'\nimport { fork } from 'redux-saga/effects'\nimport authSagas from './Auth/sagas'\nimport auth, { AuthState } from './Auth/reducer'\n\nexport interface RootState {\n  auth: AuthState\n}\n\nexport default combineReducers({ auth })\n\nexport function* rootSaga() {\n  yield fork(authSagas)\n}\n","import { createStore, compose, applyMiddleware } from 'redux'\nimport createSagaMiddleware from 'redux-saga'\nimport rootReducer, { rootSaga } from './modules'\nimport { AUTH_USER_FETCH_REQUEST } from './modules/Auth/actions'\n\nconst createAppStore = () => {\n  const sagaMiddleware = createSagaMiddleware()\n\n  const store = createStore(\n    rootReducer,\n    compose(\n      applyMiddleware(sagaMiddleware),\n      (window as any).__REDUX_DEVTOOLS_EXTENSION__ &&\n        (window as any).__REDUX_DEVTOOLS_EXTENSION__()\n    )\n  )\n\n  sagaMiddleware.run(rootSaga)\n\n  store.dispatch({ type: AUTH_USER_FETCH_REQUEST })\n\n  return store\n}\n\nexport default createAppStore\n","import { StrictMode } from 'react'\nimport { render } from 'react-dom'\nimport './index.scss'\nimport { BrowserRouter } from 'react-router-dom'\nimport { Provider } from 'react-redux'\nimport App from './components/App'\nimport reportWebVitals from './reportWebVitals'\nimport createStore from './store'\n\nconst store = createStore()\n\nrender(\n  <StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}