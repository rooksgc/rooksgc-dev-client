{"version":3,"sources":["hooks/useShallowEqualSelector.ts","components/MainMenu/index.tsx","hooks/useActions.ts","modules/Auth/actions.ts","components/UserMenu/index.tsx","containers/Private.tsx","components/Header/index.tsx","components/Home/index.tsx","components/Chat/index.tsx","services/auth.ts","components/Login/index.tsx","components/Register/index.tsx","components/Recover/index.tsx","components/ChangePassword/index.tsx","components/Activation/index.tsx","components/PrivateRoute/index.tsx","components/UserProfile/index.tsx","components/Routes/index.tsx","components/App/index.tsx","reportWebVitals.ts","modules/Auth/sagas.ts","modules/Auth/reducer.ts","modules/launchSaga.ts","modules/index.ts","modules/store.ts","index.tsx"],"names":["useShallowEqualSelector","selector","useSelector","shallowEqual","unauthorizedMenu","key","label","path","icon","PieChartOutlined","authorizedMenu","MainMenu","location","useLocation","history","useHistory","user","state","auth","menuItems","find","item","pathname","mode","selectedKeys","onClick","clicked","_item","push","map","Item","useActions","actions","deps","dispatch","useDispatch","useMemo","Array","isArray","a","bindActionCreators","setToken","createAction","fetchUserSuccess","fetchUserFailure","logoutUserRequest","UserMenu","dispatchLogoutUserRequest","menu","event","ProfileOutlined","Divider","LogoutOutlined","overlay","trigger","className","UserOutlined","PrivateContainer","children","AntHeader","Layout","Header","props","onToggle","collapsed","Private","MenuUnfoldOutlined","MenuFoldOutlined","Home","src","style","width","maxWidth","alt","Chat","AUTH_TOKEN_STORAGE_KEY","makeError","error","response","data","status","message","type","AuthService","getAllUsers","send","method","endpoint","register","payload","activate","code","login","fetchByToken","recover","checkSecret","changePassword","getToken","localStorage","getItem","setItem","removeToken","removeItem","axios","interceptors","request","use","config","token","headers","Authorization","Login","emptyMessage","Form","useForm","form","useState","alert","setAlert","loading","setLoading","dispatchFetchUserSuccess","dispatchSetToken","onFinish","values","email","password","authService","title","name","initialValues","remember","rules","required","min","prefix","MailOutlined","placeholder","size","Password","LockOutlined","noStyle","to","indicator","LoadingOutlined","fontSize","spin","delay","htmlType","block","Register","resetFields","validateTrigger","pattern","dependencies","getFieldValue","validator","_","value","Promise","reject","Error","resolve","disabled","Recover","ChangePassword","useParams","secretError","setSecretError","changeSuccess","setChangeSuccess","useEffect","secretType","match","Activation","activateUser","PrivateRoute","Component","component","rest","render","routeProps","from","defaultProps","undefined","UserProfile","Routes","exact","Content","Footer","Sider","App","setCollapsed","preventDefault","theme","collapsible","DesktopOutlined","textAlign","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","setTokenFlow","setTokenWatcher","logoutUserRequestFlow","userLogoutWatcher","generator","call","takeLatest","put","fork","handleActions","toString","_state","action","combineReducers","launchSaga","rootSaga","authSagas","store","sagaMiddleware","createSagaMiddleware","createStore","rootReducer","compose","composeWithDevTools","applyMiddleware","run","createAppStore","document","getElementById"],"mappings":"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","file":"static/js/main.68aac66c.chunk.js","sourcesContent":["import { useSelector, shallowEqual } from 'react-redux'\nimport { RootState } from '../modules'\n\nconst useShallowEqualSelector = (selector: any) =>\n  useSelector<RootState>(selector, shallowEqual)\n\nexport default useShallowEqualSelector\n","import { FC } from 'react'\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { Menu } from 'antd'\nimport { PieChartOutlined } from '@ant-design/icons'\nimport useShallowEqualSelector from '../../hooks/useShallowEqualSelector'\n\nconst unauthorizedMenu = [\n  {\n    key: 'login',\n    label: 'Войти',\n    path: '/auth/login',\n    icon: <PieChartOutlined />\n  },\n  {\n    key: 'register',\n    label: 'Регистрация',\n    path: '/auth/register',\n    icon: <PieChartOutlined />\n  }\n]\n\nconst authorizedMenu = [\n  {\n    key: 'home',\n    label: 'Главная',\n    path: '/',\n    icon: <PieChartOutlined />\n  },\n  {\n    key: 'chat',\n    label: 'Чат',\n    path: '/chat',\n    icon: <PieChartOutlined />\n  }\n]\n\nconst MainMenu: FC = () => {\n  const location = useLocation()\n  const history = useHistory()\n  const user = useShallowEqualSelector((state) => state.auth.user)\n  const menuItems = () => (user ? authorizedMenu : unauthorizedMenu)\n\n  const key = menuItems().find((item) => location.pathname === item.path)?.key\n  if (!key && !user) return null\n\n  const onClickMenu = (item) => {\n    if (item.key === key) return\n    const clicked = menuItems().find((_item) => _item.key === item.key)\n    history.push(clicked.path)\n  }\n\n  return (\n    <Menu mode=\"horizontal\" selectedKeys={[key]} onClick={onClickMenu}>\n      {menuItems().map((item) => (\n        <Menu.Item key={item.key} icon={item.icon}>\n          {item.label}\n        </Menu.Item>\n      ))}\n    </Menu>\n  )\n}\n\nexport default MainMenu\n","import { bindActionCreators } from 'redux'\nimport { useDispatch } from 'react-redux'\nimport { useMemo } from 'react'\n\nconst useActions = (actions, deps) => {\n  const dispatch = useDispatch()\n\n  return useMemo(\n    () => {\n      if (Array.isArray(actions)) {\n        return actions.map((a) => bindActionCreators(a, dispatch))\n      }\n      return bindActionCreators(actions, dispatch)\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    deps ? [dispatch, ...deps] : [dispatch]\n  )\n}\n\nexport default useActions\n","import { createAction } from 'redux-actions'\r\n\r\n/** Записать токен пользователя в стор */\r\nexport const setToken: any = createAction('AUTH/USER_SET_TOKEN')\r\n\r\n/** Записать объект пользователя в стор */\r\nexport const fetchUserSuccess: any = createAction('AUTH/USER_FETCH_SUCCESS')\r\n\r\n/** Ошибка получения объекта пользователя */\r\nexport const fetchUserFailure: any = createAction('AUTH/USER_FETCH_FAILURE')\r\n\r\n/** Выход пользователя из системы (logout) */\r\nexport const logoutUserRequest: any = createAction('AUTH/USER_LOGOUT_REQUEST')\r\n","import { FC } from 'react'\nimport { useLocation, useHistory } from 'react-router-dom'\nimport { Menu, Dropdown, Avatar } from 'antd'\nimport {\n  UserOutlined,\n  LogoutOutlined,\n  ProfileOutlined\n} from '@ant-design/icons'\nimport useActions from '../../hooks/useActions'\nimport { logoutUserRequest } from '../../modules/Auth/actions'\n\nconst UserMenu: FC = () => {\n  const location = useLocation()\n  const history = useHistory()\n  const [dispatchLogoutUserRequest] = useActions([logoutUserRequest], null)\n\n  const handleMenuClick = (event) => {\n    const { key } = event\n    if (location.pathname === `/user/${key}`) return\n\n    switch (key) {\n      case 'profile':\n        history.push('/user/profile')\n        break\n      case 'logout':\n        dispatchLogoutUserRequest()\n        history.push('/auth/login')\n        break\n      default:\n        break\n    }\n  }\n\n  const menu = (\n    <Menu onClick={handleMenuClick}>\n      <Menu.Item key=\"profile\" icon={<ProfileOutlined />}>\n        Профиль\n      </Menu.Item>\n      <Menu.Divider />\n      <Menu.Item key=\"logout\" icon={<LogoutOutlined />}>\n        Выход\n      </Menu.Item>\n    </Menu>\n  )\n\n  return (\n    <Dropdown overlay={menu} trigger={['click']}>\n      <Avatar className=\"user-profile\" icon={<UserOutlined />} />\n    </Dropdown>\n  )\n}\n\nexport default UserMenu\n","import useShallowEqualSelector from '../hooks/useShallowEqualSelector'\n\nconst PrivateContainer = ({ children }) => {\n  const user = useShallowEqualSelector((state) => state.auth.user)\n  if (!user) return null\n\n  return children\n}\n\nexport default PrivateContainer\n","import { Layout } from 'antd'\nimport { MenuUnfoldOutlined, MenuFoldOutlined } from '@ant-design/icons'\nimport MainMenu from '../MainMenu'\nimport UserMenu from '../UserMenu'\nimport PrivateContainer from '../../containers/Private'\n\nconst { Header: AntHeader } = Layout\n\nconst Header = (props: any) => {\n  const { onToggle, collapsed } = props\n\n  return (\n    <AntHeader className=\"header background-white\">\n      <PrivateContainer>\n        {collapsed ? (\n          <MenuUnfoldOutlined\n            className=\"trigger collapsed\"\n            onClick={onToggle}\n          />\n        ) : (\n          <MenuFoldOutlined className=\"trigger expanded\" onClick={onToggle} />\n        )}\n      </PrivateContainer>\n      <div className=\"header-menu\">\n        <MainMenu />\n        <PrivateContainer>\n          <UserMenu />\n        </PrivateContainer>\n      </div>\n    </AntHeader>\n  )\n}\n\nexport default Header\n","import { FC } from 'react'\n\nconst Home: FC = () => (\n  <div className=\"flex-center flex-column\">\n    <h1>Коротко о Svelte</h1>\n    <img\n      src=\"/images/svelte.png\"\n      style={{ width: 700, maxWidth: '100%' }}\n      alt=\"Коротко о Svelte\"\n    />\n  </div>\n)\n\nexport default Home\n","const Chat = () => <h1>Chat window</h1>\n\nexport default Chat\n","import axios, { AxiosRequestConfig, AxiosResponse } from 'axios'\n\nexport interface ServerResponse {\n  type: any\n  message?: string\n  data?: any\n  errors?: string[]\n  token?: string\n}\n\nexport interface UserLoginRequestDTO {\n  email: string\n  password: string\n}\n\nexport interface UserCreateRequestDTO {\n  name: string\n  email: string\n  password: string\n}\n\nexport interface UserDTO {\n  id: number\n  name: string\n  email: string\n  role: string\n}\n\nexport interface UserRecoverPasswordRequestDTO {\n  email: string\n}\n\nexport interface CheckSecretRequestDTO {\n  code: string\n  secretType: string\n}\n\nexport interface ChangePasswordRequestDTO {\n  code: string\n  password: string\n}\n\nexport interface UserFetchByTokenRequestDTO {\n  token: string\n}\n\n/** Сообщение при недоступном соединении */\nexport const SERVER_UNAVAILABLE =\n  'Сервер не отвечает или временно недоступен. Попробуйте повторить запрос позднее.'\n\n/** Ключ, по которому в localStorage хранится токен */\nconst AUTH_TOKEN_STORAGE_KEY = 'auth'\n\n/** Отказ в предоставлении ресурса из-за неверного токена */\nexport const AUTH_REJECTION_MESSAGE =\n  'Войдите или зарегистрируйтесь для просмотра данного содержимого.'\n\nexport const makeError = (error: any): ServerResponse => {\n  const {\n    response: { data, status }\n  } = error\n\n  if (typeof data === 'string' && (status === 502 || status === 500)) {\n    return {\n      type: 'error',\n      message: SERVER_UNAVAILABLE\n    }\n  }\n\n  if (data?.message === 'No authorization token was found') {\n    return {\n      type: 'error',\n      message: AUTH_REJECTION_MESSAGE\n    }\n  }\n\n  return data\n}\n\nconst AuthService = {\n  /** Получить список всех пользователей */\n  getAllUsers: async (): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'get',\n      endpoint: '/api/v1/auth/users'\n    }),\n  /** Регистрация нового пользователя */\n  register: async (payload: UserCreateRequestDTO): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'put',\n      endpoint: '/api/v1/auth/register',\n      payload\n    }),\n\n  /** Активация пользователя по коду из письма */\n  activate: async (code: string): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'patch',\n      endpoint: `/api/v1/auth/activate/${code}`\n    }),\n\n  /** Вход пользователя в систему и полуение токена */\n  login: async (payload: UserLoginRequestDTO): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'post',\n      endpoint: '/api/v1/auth/login',\n      payload\n    }),\n\n  /** Попытка получить объект пользователя по токену */\n  fetchByToken: async (\n    payload: UserFetchByTokenRequestDTO\n  ): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'post',\n      endpoint: '/api/v1/auth/fetch-by-token',\n      payload\n    }),\n\n  /** Запрос на изменение пароля, отправка письма со ссылкой на email */\n  recover: async (\n    payload: UserRecoverPasswordRequestDTO\n  ): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'post',\n      endpoint: '/api/v1/auth/recover',\n      payload\n    }),\n\n  /** Проверка секретного ключа для доступа к форме восстановления пароля */\n  checkSecret: async (\n    payload: CheckSecretRequestDTO\n  ): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'post',\n      endpoint: '/api/v1/auth/check-secret',\n      payload\n    }),\n\n  /** Изменение пароля пользователя */\n  changePassword: async (\n    payload: ChangePasswordRequestDTO\n  ): Promise<ServerResponse> =>\n    AuthService.send({\n      method: 'patch',\n      endpoint: '/api/v1/auth/change-password',\n      payload\n    }),\n\n  getToken: (): string | null => localStorage.getItem(AUTH_TOKEN_STORAGE_KEY),\n\n  setToken: (payload: string): void =>\n    localStorage.setItem(AUTH_TOKEN_STORAGE_KEY, payload),\n\n  removeToken: (): void => localStorage.removeItem(AUTH_TOKEN_STORAGE_KEY),\n\n  send: async ({ method, endpoint, payload = {} }): Promise<ServerResponse> => {\n    try {\n      const response: AxiosResponse = await axios[method](endpoint, payload)\n      return response.data\n    } catch (error) {\n      return makeError(error)\n    }\n  }\n}\n\naxios.interceptors.request.use(\n  (config: AxiosRequestConfig) => {\n    const token = AuthService.getToken()\n\n    if (token) {\n      // eslint-disable-next-line no-param-reassign\n      config.headers = {\n        Authorization: `Bearer ${token}`\n      }\n    }\n\n    return config\n  },\n  (error) => makeError(error)\n)\n\nexport default AuthService\n","import { FC, useState } from 'react'\nimport { Form, Input, Button, Card, Alert, Spin } from 'antd'\nimport { MailOutlined, LockOutlined, LoadingOutlined } from '@ant-design/icons'\nimport { Link, useHistory } from 'react-router-dom'\nimport useActions from '../../hooks/useActions'\nimport authService from '../../services/auth'\nimport { fetchUserSuccess, setToken } from '../../modules/Auth/actions'\n\ninterface FormValues {\n  email: string\n  password: string\n}\n\nconst Login: FC = () => {\n  const emptyMessage = { type: '', message: '' }\n  const [form] = Form.useForm()\n  const [alert, setAlert] = useState(emptyMessage)\n  const [loading, setLoading] = useState(false)\n  const [dispatchFetchUserSuccess, dispatchSetToken] = useActions(\n    [fetchUserSuccess, setToken],\n    null\n  )\n  const history = useHistory()\n\n  const onFinish = async (values: FormValues) => {\n    try {\n      setAlert(emptyMessage)\n      setLoading(true)\n\n      const { email, password } = values\n      const { type, message, token, data } = await authService.login({\n        email,\n        password\n      })\n\n      if (message) {\n        setAlert({ type, message })\n        setLoading(false)\n        if (type === 'error') return\n      }\n\n      dispatchFetchUserSuccess(data)\n      dispatchSetToken(token)\n\n      setLoading(false)\n\n      history.push('/chat')\n    } catch (error) {\n      setAlert(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Вход в систему\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n        <Form\n          form={form}\n          name=\"login\"\n          className=\"login-form\"\n          initialValues={{ remember: true }}\n          onFinish={onFinish}\n        >\n          <Form.Item\n            name=\"email\"\n            rules={[\n              {\n                required: true,\n                type: 'email',\n                min: 4,\n                message: 'Некорректный email'\n              }\n            ]}\n          >\n            <Input prefix={<MailOutlined />} placeholder=\"Email\" size=\"large\" />\n          </Form.Item>\n\n          <Form.Item\n            name=\"password\"\n            rules={[{ required: true, min: 6, message: 'Минимум 6 символов' }]}\n          >\n            <Input.Password\n              placeholder=\"Пароль\"\n              prefix={<LockOutlined />}\n              size=\"large\"\n            />\n          </Form.Item>\n\n          <Form.Item>\n            <Form.Item name=\"register\" noStyle>\n              <Link to=\"/auth/register\">Регистрация</Link>\n            </Form.Item>\n\n            <Link className=\"link-recover\" to=\"/auth/recover\">\n              Забыли пароль?\n            </Link>\n          </Form.Item>\n\n          {loading && (\n            <Spin\n              className=\"center\"\n              indicator={<LoadingOutlined style={{ fontSize: 40 }} spin />}\n              delay={500}\n            />\n          )}\n\n          <Button size=\"large\" type=\"primary\" htmlType=\"submit\" block>\n            Войти\n          </Button>\n        </Form>\n      </Card>\n    </div>\n  )\n}\n\nexport default Login\n","import { FC, useState } from 'react'\nimport { Form, Input, Button, Card, Alert, Spin } from 'antd'\nimport {\n  UserOutlined,\n  LockOutlined,\n  MailOutlined,\n  LoadingOutlined\n} from '@ant-design/icons'\nimport authService from '../../services/auth'\n\ninterface FormValues {\n  name: string\n  email: string\n  password: string\n}\n\nconst Register: FC = () => {\n  const emptyMessage = { type: '', message: '' }\n  const [form] = Form.useForm()\n  const [alert, setAlert] = useState(emptyMessage)\n  const [loading, setLoading] = useState(false)\n\n  const onFinish = async (values: FormValues) => {\n    try {\n      setAlert(emptyMessage)\n      setLoading(true)\n\n      const { name, email, password } = values\n      const { type, message } = await authService.register({\n        name,\n        email,\n        password\n      })\n\n      if (message) {\n        setAlert({ type, message })\n        setLoading(false)\n        if (type === 'error') return\n      }\n\n      form.resetFields()\n      setLoading(false)\n    } catch (error) {\n      setAlert(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Регистрация\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n        <Form\n          form={form}\n          name=\"register\"\n          initialValues={{ remember: true }}\n          onFinish={onFinish}\n          validateTrigger=\"onBlur\"\n        >\n          <Form.Item\n            name=\"name\"\n            rules={[\n              {\n                required: true,\n                message:\n                  \"Имя должно содержать минимум 4 символа английского или русского алфавита, допустимы цифры и знаки '- _'\",\n                pattern: /^[a-zA-Zа-яА-ЯёЁ0-9-_\\s]{4,}$/\n              }\n            ]}\n          >\n            <Input placeholder=\"Имя\" size=\"large\" prefix={<UserOutlined />} />\n          </Form.Item>\n\n          <Form.Item\n            name=\"email\"\n            rules={[\n              { required: true, type: 'email', message: 'Некорректный email' }\n            ]}\n          >\n            <Input prefix={<MailOutlined />} placeholder=\"Email\" size=\"large\" />\n          </Form.Item>\n\n          <Form.Item\n            name=\"password\"\n            rules={[\n              {\n                required: true,\n                message: 'Введите пароль! Минимум 6 символов.',\n                min: 6\n              }\n            ]}\n          >\n            <Input.Password\n              placeholder=\"Пароль\"\n              prefix={<LockOutlined />}\n              size=\"large\"\n            />\n          </Form.Item>\n\n          <Form.Item\n            name=\"confirm-password\"\n            dependencies={['password']}\n            rules={[\n              {\n                required: true,\n                message: 'Введите подтверждение пароля! Минимум 6 символов.',\n                min: 6\n              },\n              ({ getFieldValue }) => ({\n                validator(_, value) {\n                  if (!value || getFieldValue('password') === value) {\n                    return Promise.resolve()\n                  }\n                  return Promise.reject(new Error('Пароли должны совпадать!'))\n                }\n              })\n            ]}\n          >\n            <Input.Password\n              placeholder=\"Пароль еще раз\"\n              prefix={<LockOutlined />}\n              size=\"large\"\n            />\n          </Form.Item>\n\n          {loading && (\n            <Spin\n              className=\"center\"\n              indicator={<LoadingOutlined style={{ fontSize: 40 }} spin />}\n              delay={500}\n            />\n          )}\n\n          <Button\n            className=\"submit-button\"\n            type=\"primary\"\n            htmlType=\"submit\"\n            size=\"large\"\n            block\n            disabled={loading}\n          >\n            Зарегистрироваться\n          </Button>\n        </Form>\n      </Card>\n    </div>\n  )\n}\n\nexport default Register\n","import { FC, useState } from 'react'\nimport { Form, Input, Button, Card, Alert, Spin } from 'antd'\nimport { MailOutlined, LoadingOutlined } from '@ant-design/icons'\nimport authService from '../../services/auth'\n\ninterface FormValues {\n  email: string\n}\n\nconst Recover: FC = () => {\n  const emptyMessage = { type: '', message: '' }\n  const [form] = Form.useForm()\n  const [alert, setAlert] = useState(emptyMessage)\n  const [loading, setLoading] = useState(false)\n\n  const onFinish = async (values: FormValues) => {\n    try {\n      setAlert(emptyMessage)\n      setLoading(true)\n\n      const { email } = values\n      const { type, message } = await authService.recover({\n        email\n      })\n\n      if (message) {\n        setAlert({ type, message })\n        setLoading(false)\n        if (type === 'error') return\n      }\n\n      form.resetFields()\n      setLoading(false)\n    } catch (error) {\n      setAlert(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Восстановление пароля\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n        {alert.type !== 'success' && (\n          <>\n            <p>\n              Укажите email, указанный при регистрации и мы вышлем на него\n              ссылку для восстановления пароля.\n            </p>\n            <Form\n              form={form}\n              name=\"recover\"\n              className=\"login-form\"\n              initialValues={{ remember: true }}\n              onFinish={onFinish}\n              validateTrigger=\"onBlur\"\n            >\n              <Form.Item\n                name=\"email\"\n                rules={[\n                  {\n                    required: true,\n                    type: 'email',\n                    message: 'Некорректный email!'\n                  }\n                ]}\n              >\n                <Input\n                  prefix={<MailOutlined />}\n                  placeholder=\"Email\"\n                  size=\"large\"\n                />\n              </Form.Item>\n\n              {loading && (\n                <Spin\n                  className=\"center\"\n                  indicator={<LoadingOutlined style={{ fontSize: 40 }} spin />}\n                  delay={500}\n                />\n              )}\n\n              <Button\n                size=\"large\"\n                type=\"primary\"\n                htmlType=\"submit\"\n                block\n                disabled={loading}\n              >\n                Восстановить пароль\n              </Button>\n            </Form>\n          </>\n        )}\n      </Card>\n    </div>\n  )\n}\n\nexport default Recover\n","import { FC, useState, useEffect } from 'react'\nimport { useParams, Link } from 'react-router-dom'\nimport { Form, Input, Button, Card, Alert } from 'antd'\nimport { LockOutlined } from '@ant-design/icons'\nimport authService from '../../services/auth'\n\ninterface ChangePasswordParams {\n  code?: string\n}\n\ninterface FormValues {\n  password: string\n  confirmPassword: string\n}\n\nconst ChangePassword: FC = () => {\n  const { code }: ChangePasswordParams = useParams()\n  const emptyMessage = { type: '', message: '' }\n  const [alert, setAlert] = useState(emptyMessage)\n  const [secretError, setSecretError] = useState(false)\n  const [changeSuccess, setChangeSuccess] = useState(false)\n  const [loading, setLoading] = useState(false)\n\n  useEffect(() => {\n    const checkSecret = async () => {\n      const { type, message } = await authService.checkSecret({\n        code,\n        secretType: 'RECOVER_PASSWORD'\n      })\n      if (type === 'error') {\n        setAlert({ type, message })\n        setSecretError(true)\n      }\n    }\n\n    if (\n      code.match(\n        /^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i\n      )\n    ) {\n      checkSecret()\n    } else {\n      setAlert({ type: 'error', message: 'Неверный секретный код!' })\n      setSecretError(true)\n    }\n  }, [code])\n\n  const onFinish = async (values: FormValues) => {\n    try {\n      setAlert(emptyMessage)\n      setLoading(true)\n\n      const { password } = values\n      const { type, message } = await authService.changePassword({\n        code,\n        password\n      })\n\n      if (message) {\n        setAlert({ type, message })\n        setLoading(false)\n        if (type === 'error') return\n      }\n\n      setChangeSuccess(true)\n      setLoading(false)\n    } catch (error) {\n      setAlert(error)\n      setLoading(false)\n    }\n  }\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Изменение пароля\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n\n        {changeSuccess && (\n          <p>\n            Теперь Вы можете <Link to=\"/auth/login\">Войти</Link> в приложение\n          </p>\n        )}\n\n        {!secretError && !changeSuccess && (\n          <>\n            <p>Придумайте новый пароль</p>\n            <Form\n              name=\"change-password-request\"\n              initialValues={{ remember: true }}\n              onFinish={onFinish}\n            >\n              <Form.Item\n                name=\"password\"\n                rules={[{ required: true, message: 'Введите пароль!' }]}\n              >\n                <Input.Password\n                  placeholder=\"Пароль\"\n                  prefix={<LockOutlined />}\n                  size=\"large\"\n                />\n              </Form.Item>\n\n              <Form.Item\n                name=\"confirmPassword\"\n                dependencies={['password']}\n                rules={[\n                  { required: true, message: 'Введите подтверждение пароля!' },\n                  ({ getFieldValue }) => ({\n                    validator(_, value) {\n                      if (!value || getFieldValue('password') === value) {\n                        return Promise.resolve()\n                      }\n                      return Promise.reject(\n                        new Error('Пароли должны совпадать!')\n                      )\n                    }\n                  })\n                ]}\n              >\n                <Input.Password\n                  placeholder=\"Пароль еще раз\"\n                  prefix={<LockOutlined />}\n                  size=\"large\"\n                />\n              </Form.Item>\n\n              <Button\n                className=\"submit-button\"\n                type=\"primary\"\n                htmlType=\"submit\"\n                size=\"large\"\n                block\n                disabled={loading}\n              >\n                Изменить пароль\n              </Button>\n            </Form>\n          </>\n        )}\n      </Card>\n    </div>\n  )\n}\n\nexport default ChangePassword\n","import { FC, useState, useEffect } from 'react'\nimport { Card, Alert } from 'antd'\nimport { Link, useParams } from 'react-router-dom'\nimport authService from '../../services/auth'\n\ninterface ActivationParams {\n  code?: string\n}\n\nconst Activation: FC = () => {\n  const { code }: ActivationParams = useParams()\n  const emptyMessage = { type: '', message: '' }\n  const [alert, setAlert] = useState(emptyMessage)\n\n  useEffect(() => {\n    const activateUser = async () => {\n      const { type, message } = await authService.activate(code)\n      if (message) {\n        setAlert({ type, message })\n      }\n    }\n    activateUser()\n  }, [code])\n\n  return (\n    <div className=\"flex-center\">\n      <Card className=\"card\" title=\"Активация нового пользователя\">\n        {alert.message && (\n          <Alert\n            className=\"alert\"\n            message={alert.message}\n            type={alert.type as any}\n          />\n        )}\n        <Link className=\"login-link\" to=\"/auth/login\">\n          Вход\n        </Link>\n        <Link className=\"link-recover\" to=\"/auth/recover\">\n          Восстановить пароль\n        </Link>\n      </Card>\n    </div>\n  )\n}\n\nexport default Activation\n","import { FC } from 'react'\r\nimport { Route, Redirect, RouteProps } from 'react-router-dom'\r\nimport useShallowEqualSelector from '../../hooks/useShallowEqualSelector'\r\nimport { RootState } from '../../modules'\r\n\r\ninterface PrivateRouteProps extends RouteProps {\r\n  component?: any\r\n  children?: any\r\n}\r\n\r\nconst PrivateRoute: FC<PrivateRouteProps> = ({\r\n  component: Component,\r\n  children,\r\n  ...rest\r\n}) => {\r\n  const user = useShallowEqualSelector((state: RootState) => state.auth.user)\r\n\r\n  return (\r\n    <Route\r\n      {...rest}\r\n      render={(routeProps) =>\r\n        user === false ? (\r\n          <Redirect\r\n            to={{\r\n              pathname: '/auth/login',\r\n              state: { from: routeProps.location }\r\n            }}\r\n          />\r\n        ) : user === null ? null : Component ? (\r\n          <Component {...routeProps} />\r\n        ) : (\r\n          children\r\n        )\r\n      }\r\n    />\r\n  )\r\n}\r\n\r\nPrivateRoute.defaultProps = {\r\n  component: undefined\r\n}\r\n\r\nexport default PrivateRoute\r\n","const UserProfile = () => <h1>Профиль пользователя</h1>\n\nexport default UserProfile\n","import { FC } from 'react'\nimport { Switch, Route, Redirect } from 'react-router-dom'\n\nimport Home from '../Home'\nimport Chat from '../Chat'\nimport Login from '../Login'\nimport Register from '../Register'\nimport Recover from '../Recover'\nimport ChangePassword from '../ChangePassword'\nimport Activation from '../Activation'\nimport PrivateRoute from '../PrivateRoute'\nimport UserProfile from '../UserProfile'\n\nconst Routes: FC = () => (\n  <Switch>\n    <PrivateRoute exact path=\"/\" component={Home} />\n    <Route path=\"/auth/login\" component={Login} />\n    <Route path=\"/auth/register\" component={Register} />\n    <Route path=\"/auth/activation/:code\" component={Activation} />\n    <Route path=\"/auth/recover\" component={Recover} />\n    <Route path=\"/auth/change-password/:code\" component={ChangePassword} />\n    <PrivateRoute path=\"/user/profile\" component={UserProfile} />\n    <PrivateRoute path=\"/chat\" component={Chat} />\n    <Route path=\"*\">\n      <Redirect to=\"/auth/login\" />\n    </Route>\n  </Switch>\n)\n\nexport default Routes\n","import { FC, SyntheticEvent, useState } from 'react'\nimport { Layout, Menu } from 'antd'\nimport { DesktopOutlined } from '@ant-design/icons'\nimport Header from '../Header'\nimport Routes from '../Routes'\nimport PrivateContainer from '../../containers/Private'\n\nconst { Content, Footer, Sider } = Layout\n\nconst App: FC = () => {\n  const [collapsed, setCollapsed] = useState(false)\n  const toggle = (event: SyntheticEvent): void => {\n    event.preventDefault()\n    setCollapsed(!collapsed)\n  }\n\n  return (\n    <Layout className=\"main\">\n      <Header collapsed={collapsed} onToggle={toggle} />\n\n      <Layout>\n        <PrivateContainer>\n          <Sider\n            className=\"sider\"\n            theme=\"light\"\n            collapsible\n            trigger={null}\n            collapsed={collapsed}\n          >\n            <Menu mode=\"inline\">\n              <Menu.Item key=\"1\" icon={<DesktopOutlined />}>\n                Общий чат\n              </Menu.Item>\n            </Menu>\n          </Sider>\n        </PrivateContainer>\n\n        <Content className=\"content\">\n          <Routes />\n        </Content>\n      </Layout>\n\n      <Footer\n        className=\"footer background-white\"\n        style={{ textAlign: 'center' }}\n      >\n        © [Chat]\n      </Footer>\n    </Layout>\n  )\n}\n\nexport default App\n","import { ReportHandler } from 'web-vitals'\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry)\n      getFID(onPerfEntry)\n      getFCP(onPerfEntry)\n      getLCP(onPerfEntry)\n      getTTFB(onPerfEntry)\n    })\n  }\n}\n\nexport default reportWebVitals\n","import { takeLatest, put, call, fork } from 'redux-saga/effects'\r\nimport { logoutUserRequest, fetchUserSuccess, setToken } from './actions'\r\nimport authService from '../../services/auth'\r\n\r\n/** Сохранение token в localStorage */\r\nexport function* setTokenFlow({ payload }) {\r\n  yield call([authService, authService.setToken], payload)\r\n}\r\nexport function* setTokenWatcher() {\r\n  yield takeLatest(setToken, setTokenFlow)\r\n}\r\n\r\n/** Выход пользователя из системы (logout) */\r\nexport function* logoutUserRequestFlow() {\r\n  yield call([authService, authService.removeToken])\r\n  yield put(fetchUserSuccess(false))\r\n}\r\nexport function* userLogoutWatcher() {\r\n  yield takeLatest(logoutUserRequest, logoutUserRequestFlow)\r\n}\r\n\r\nexport default function* generator() {\r\n  yield fork(setTokenWatcher)\r\n  yield fork(userLogoutWatcher)\r\n}\r\n","import { combineReducers } from 'redux'\r\nimport { handleActions } from 'redux-actions'\r\nimport { UserDTO } from '../../services/auth'\r\nimport { fetchUserSuccess, fetchUserFailure } from './actions'\r\n\r\nexport interface AuthState {\r\n  user: UserDTO\r\n}\r\n\r\nexport const initialState = {\r\n  user: null\r\n}\r\n\r\nconst user = handleActions(\r\n  {\r\n    [fetchUserSuccess.toString()]: (_state, action) => action.payload,\r\n    [fetchUserFailure]: () => false\r\n  },\r\n  null\r\n)\r\n\r\nexport default combineReducers<AuthState>({\r\n  user\r\n})\r\n","import { call, put } from 'redux-saga/effects'\nimport { fetchUserSuccess, fetchUserFailure } from './Auth/actions'\nimport authService from '../services/auth'\n\n/** Launch saga once when on app start */\nconst launchSaga = function* launchSaga() {\n  try {\n    const token = yield call([authService, authService.getToken])\n\n    if (!token) {\n      yield put(fetchUserFailure())\n      return\n    }\n    const { data, message } = yield call(\n      [authService, authService.fetchByToken],\n      { token }\n    )\n\n    if (message === 'TokenExpiredError' || message === 'JsonWebTokenError') {\n      yield call([authService, authService.removeToken])\n      yield put(fetchUserFailure())\n    }\n\n    if (data) {\n      yield put(fetchUserSuccess(data))\n    }\n  } catch (error) {\n    yield call([authService, authService.removeToken])\n    yield put(fetchUserFailure(error))\n  }\n}\n\nexport default launchSaga\n","import { combineReducers } from 'redux'\nimport { fork } from 'redux-saga/effects'\nimport authSagas from './Auth/sagas'\nimport auth, { AuthState } from './Auth/reducer'\nimport launchSaga from './launchSaga'\n\n// Root state interface\nexport interface RootState {\n  auth: AuthState\n}\n\nexport const initialState = {\n  auth: { user: null }\n}\n\n// Root reducer\nexport default combineReducers({ auth })\n\n// Root saga\nexport function* rootSaga() {\n  yield fork(authSagas)\n  yield fork(launchSaga)\n}\n","import { createStore, compose, applyMiddleware } from 'redux'\nimport { composeWithDevTools } from 'redux-devtools-extension'\nimport createSagaMiddleware from 'redux-saga'\nimport rootReducer, { rootSaga } from '.'\n\nconst createAppStore = () => {\n  const sagaMiddleware = createSagaMiddleware()\n  const store = createStore(\n    rootReducer,\n    compose(composeWithDevTools(applyMiddleware(sagaMiddleware)))\n  )\n\n  sagaMiddleware.run(rootSaga)\n  return store\n}\n\nexport default createAppStore\n","import { StrictMode } from 'react'\nimport { Provider } from 'react-redux'\nimport { BrowserRouter } from 'react-router-dom'\nimport { render } from 'react-dom'\nimport App from './components/App'\nimport './index.scss'\nimport reportWebVitals from './reportWebVitals'\nimport createAppStore from './modules/store'\n\nconst store = createAppStore()\n\nrender(\n  <StrictMode>\n    <Provider store={store}>\n      <BrowserRouter>\n        <App />\n      </BrowserRouter>\n    </Provider>\n  </StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals()\n"],"sourceRoot":""}